{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst API_KEY = '41830108-cae6afe398dec34048fd09339';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('#gallery');\nconst loader = document.querySelector('#loader');\nconst loadMoreButton = document.querySelector('#load-more-button');\n\nlet searchQuery = '';\nlet page = 1;\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  gallery.innerHTML = '';\n  searchQuery = event.currentTarget.elements.query.value;\n  page = 1;\n\n  await fetchImages();\n});\n\nloadMoreButton.addEventListener('click', fetchImages);\n\nasync function fetchImages() {\n  toggleVisibility(loader);\n  toggleVisibility(loadMoreButton);\n\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=${API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`\n    );\n\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    const images = response.data.hits.map(image => {\n      return `<a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" data-large=\"${image.largeImageURL}\">\n              </a>`;\n    });\n\n    gallery.insertAdjacentHTML('beforeend', images.join(''));\n    lightbox.refresh();\n\n    if (response.data.totalHits <= page * 40) {\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      toggleVisibility(loadMoreButton);\n    } else {\n      toggleVisibility(loadMoreButton);\n    }\n\n    page += 1;\n\n    const cardHeight = document\n      .querySelector('.gallery a')\n      .getBoundingClientRect().height;\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  } finally {\n    toggleVisibility(loader);\n  }\n}\n\nfunction toggleVisibility(element) {\n  element.classList.toggle('hidden');\n}\n"],"names":["API_KEY","form","gallery","loader","loadMoreButton","searchQuery","page","lightbox","SimpleLightbox","event","fetchImages","toggleVisibility","response","axios","iziToast","images","image","cardHeight","element"],"mappings":"owBAOA,MAAMA,EAAU,qCAEVC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,mBAAmB,EAEjE,IAAIC,EAAc,GACdC,EAAO,EAEX,MAAMC,EAAW,IAAIC,EAAe,YAAY,EAEhDP,EAAK,iBAAiB,SAAU,MAAMQ,GAAS,CAC7CA,EAAM,eAAc,EAEpBP,EAAQ,UAAY,GACpBG,EAAcI,EAAM,cAAc,SAAS,MAAM,MACjDH,EAAO,EAEP,MAAMI,EAAW,CACnB,CAAC,EAEDN,EAAe,iBAAiB,QAASM,CAAW,EAEpD,eAAeA,GAAc,CAC3BC,EAAiBR,CAAM,EACvBQ,EAAiBP,CAAc,EAE/B,GAAI,CACF,MAAMQ,EAAW,MAAMC,EAAM,IAC3B,gCAAgCb,OAAaK,8EAAwFC,GAC3I,EAEI,GAAIM,EAAS,KAAK,KAAK,SAAW,EAAG,CACnCE,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACV,CAAO,EACD,MACD,CAED,MAAMC,EAASH,EAAS,KAAK,KAAK,IAAII,GAC7B,YAAYA,EAAM;AAAA,4BACHA,EAAM,sBAAsBA,EAAM,qBAAqBA,EAAM;AAAA,mBAEpF,EAEDd,EAAQ,mBAAmB,YAAaa,EAAO,KAAK,EAAE,CAAC,EACvDR,EAAS,QAAO,EAEZK,EAAS,KAAK,WAAaN,EAAO,IACpCQ,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,EACDH,EAAiBP,CAAc,EAKjCE,GAAQ,EAER,MAAMW,EAAa,SAChB,cAAc,YAAY,EAC1B,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CAAE,IAAKA,EAAa,EAAG,SAAU,QAAQ,CAAE,CAC5D,MAAC,CACAH,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+CACf,CAAK,CACL,QAAY,CACRH,EAAiBR,CAAM,CACxB,CACH,CAEA,SAASQ,EAAiBO,EAAS,CACjCA,EAAQ,UAAU,OAAO,QAAQ,CACnC"}